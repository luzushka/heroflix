(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{121:function(e,t,n){e.exports=n(307)},126:function(e,t,n){},128:function(e,t,n){},231:function(e,t,n){},297:function(e,t,n){},299:function(e,t,n){},301:function(e,t,n){},303:function(e,t,n){},307:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(37),o=n.n(i),l=(n(126),n(7)),c=n(8),s=n(10),d=n(9),u=n(11),m=(n(128),function(e){return r.a.createElement("footer",{id:"footer"},"Built with <3 by Yonatan Lozinsky")}),h=n(14),p=n(114),v=n(77),f=n(118),g=n.n(f),b=n(12),E=n(15),y=n(38),O=n.n(y),j=n(39),C=n.n(j),k=n(40),M=n.n(k),_=function(e){return e.replace(/[^A-Za-z\s,:!?\d]/g,"").toLowerCase().split(" ").map(function(e){return e.charAt(0).toUpperCase()+e.substring(1)}).join(" ")},N=function(e,t){var n=Object.keys(e);return!(t&&n.length<5)&&!n.some(function(t){return e[t].length>0})},w=function(e){var t=[];return Object.keys(e).forEach(function(n){return t.push(e[n])}),t},D=function(e,t,n,a){return{title:function(){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0;if(!e.length)return"You must add a title";if(n&&t.find(function(t){return t.title.toLowerCase()===e.toLowerCase()}))return"This movie already exists";return""}(_(t),n,a)},release_year:function(){return t.match(/^\d{4}$/g)?"":"Invalid release year"},runtime:function(){return function(e){return e.match(/^\d+$/g)?"":"Invalid runtime"}(t)},genre:function(){return function(e){return e.length?"":"Missing genre"}(t)},director:function(){return function(e){return e.length?"":"Missing director"}(t)}}[e]()},x=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(s.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={id:"",title:"",release_year:"",runtime:"",genres:"",poster_path:"",director:"",errors:{}},n}return Object(u.a)(t,e),Object(c.a)(t,[{key:"handleChange",value:function(e,t){var n=this,a=e.target.value;this.setState(function(e){var r;return Object(E.a)({},e,(r={},Object(b.a)(r,t,a),Object(b.a)(r,"errors",Object(E.a)({},n.state.errors,Object(b.a)({},t,D([t],a,n.props.movies,!1)))),r))})}},{key:"onSubmit",value:function(e){e.preventDefault();var t=this.state,n=t.id,a=t.title,r=t.release_year,i=t.runtime,o=t.genres,l=t.director,c=t.poster_path;this.props.editMovie({id:n,title:_(a),release_year:r,runtime:i,genres:o,poster_path:c,director:l}),this.props.onClose()}},{key:"componentWillReceiveProps",value:function(e){var t=this,n=e.movies.find(function(e){return e.id===t.props.movieId}),a=n.id,r=n.title,i=n.release_year,o=n.runtime,l=n.genres,c=n.director,s=n.poster_path;this.setState({id:a,title:r,release_year:i,runtime:o,genres:l,director:c,poster_path:s})}},{key:"render",value:function(){var e=this,t=this.props,n=t.isOpen,a=t.onClose;return r.a.createElement("div",null,r.a.createElement(O.a,{id:"add-dialog",open:n,onClose:a},r.a.createElement(C.a,{id:"dialog-title"},"Edit a movie in our collection:"),r.a.createElement(M.a,null,r.a.createElement("form",{id:"add-form",autoComplete:"off",onSubmit:function(t){return e.onSubmit(t)}},r.a.createElement("div",{className:"add-dialog-text-fields add-dialog-text-fields"},r.a.createElement("input",{autoFocus:!0,className:"form-text-field",id:"title",placeholder:"Movie Title",value:this.state.title,onChange:function(t){return e.handleChange(t,"title")}}),r.a.createElement("input",{maxLength:"4",className:"form-text-field",id:"year",placeholder:"Release Year",value:this.state.release_year,onChange:function(t){return e.handleChange(t,"release_year")}}),r.a.createElement("input",{className:"form-text-field",id:"runtime",placeholder:"Runtime",value:this.state.runtime,onChange:function(t){return e.handleChange(t,"runtime")}}),r.a.createElement("input",{className:"form-text-field",id:"genres",placeholder:"Genre",value:this.state.genres,onChange:function(t){return e.handleChange(t,"genre")}}),r.a.createElement("input",{className:"form-text-field",id:"director",placeholder:"Director",value:this.state.director,onChange:function(t){return e.handleChange(t,"director")}})),r.a.createElement("div",{id:"dialog-errors"},w(this.state.errors).map(function(e,t){return r.a.createElement("div",{key:Math.pow(e.length,3)+t,className:"dialog-err"},e)})),r.a.createElement("div",{className:"dialog-actions"},r.a.createElement("button",{disabled:!N(this.state.errors,!1),type:"submit",className:"dialog-btn"},"Submit"),r.a.createElement("button",{type:"button",className:"dialog-btn dialog-btn-cancel",onClick:a},"Cancel"))))))}}]),t}(a.Component),S=Object(h.b)(function(e){return{movies:e.movies}},function(e){return{editMovie:function(t){return e({type:"EDIT_MOVIE",payload:t})}}})(x),A=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(s.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).onClickYes=function(){var e=n.props,t=e.deleteMovie,a=e.onClose;t(n.props.movieId),a()},n}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.isOpen,n=e.onClose;return r.a.createElement("div",null,r.a.createElement(O.a,{id:"delete-dialog",open:t,onClose:n},r.a.createElement(C.a,{id:"dialog-title"},"Are you sure you want to delete this movie?"),r.a.createElement(M.a,null,r.a.createElement("div",{className:"dialog-actions"},r.a.createElement("button",{type:"button",className:"dialog-btn",onClick:this.onClickYes},"Yes"),r.a.createElement("button",{type:"button",className:"dialog-btn dialog-btn-cancel",onClick:n},"No")))))}}]),t}(a.Component),I=Object(h.b)(function(e){return{movies:e.movies}},function(e){return{deleteMovie:function(t){return e({type:"DELETE_MOVIE",id:t})}}})(A),L=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(s.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={isDeleteModalOpen:!1,isEditModalOpen:!1},n.handleClick=function(e){n.setState(Object(b.a)({},e,!0))},n.handleClose=function(e){n.setState(Object(b.a)({},e,!1))},n}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.state,t=e.isDeleteModalOpen,n=e.isEditModalOpen;return r.a.createElement("div",{className:"movie-toolbar"},r.a.createElement("div",{className:"edit-btn",onClick:this.handleClick.bind(this,"isEditModalOpen")},r.a.createElement("img",{alt:"Edit button",src:"https://image.flaticon.com/icons/svg/148/148926.svg",height:"18px",width:"18px"})),r.a.createElement("div",{className:"delete-btn",onClick:this.handleClick.bind(this,"isDeleteModalOpen")},r.a.createElement("img",{alt:"Delete button",src:"https://image.flaticon.com/icons/svg/834/834356.svg",height:"18px",width:"18px"})),r.a.createElement(I,{isOpen:t,movieId:this.props.movieId,onClose:this.handleClose.bind(this,"isDeleteModalOpen")}),r.a.createElement(S,{isOpen:n,movieId:this.props.movieId,onClose:this.handleClose.bind(this,"isEditModalOpen")}))}}]),t}(a.Component),T="5867c07bb57009bf30272a6c6490b27f";n(231);function W(){var e=Object(p.a)(["\n    height:100%;\n    background-image: url(",");\n    /* background-size: auto; */\n"]);return W=function(){return e},e}var V=v.a.div(W(),function(e){return"NEW_MOVIE"===(t=e.posterPath)?"newcardpop.png":"http://image.tmdb.org/t/p/w185/"+t;var t}),Y=function(e){return r.a.createElement("div",{className:"movie-card"},r.a.createElement(V,{posterPath:e.movie.poster_path},r.a.createElement("div",{className:"movie-card-info-wrapper"},r.a.createElement("div",{className:"movie-card-info"},r.a.createElement(g.a,null,r.a.createElement(L,{movieId:e.movie.id}),r.a.createElement("br",null),r.a.createElement("div",{className:"movie-header"},r.a.createElement("h4",{className:"movie-title"},(t=e.movie.title,n=30,t.length>n?t.slice(0,n)+"...":t)),r.a.createElement("h5",{className:"movie-year"}," ","(".concat(e.movie.release_year,")"))),r.a.createElement("h6",null,e.movie.runtime+" Min."),r.a.createElement("h6",null,e.movie.genres),r.a.createElement("h6",null,"Directed by "+e.movie.director))))));var t,n},R={28:"Action",12:"Adventure",16:"Animation",35:"Comedy",80:"Crime",99:"Documentary",18:"Drama",10751:"Family",14:"Fantasy",36:"History",27:"Horror",10402:"Music",9648:"Mystery",10749:"Romance",878:"Science Fiction",10770:"TV Movie",53:"Thriller",10752:"War",37:"Western"},P=n(119),z=n(80),F=n.n(z),B=(n(297),function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(s.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={error:"",isLoaded:!1,displayed:""},n.extractDirectors=function(e){var t=[];return e.forEach(function(e){"Director"===e.job&&t.push(e.name)}),t},n}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){this.setDisplayed(this.props.movies)}},{key:"componentWillReceiveProps",value:function(e){this.setDisplayed(e.movies)}},{key:"setDisplayed",value:function(e){var t=this,n=e.map(function(e){return r.a.createElement(Y,{key:e.id,movie:e})});this.state.error.length>0||(e.length>15&&!this.state.isLoaded?this.setState({isLoaded:!0},function(){return t.setState({displayed:n})}):e.length>0&&this.state.isLoaded?this.setState({displayed:n}):0===e.length&&this.state.isLoaded?this.setState({displayed:r.a.createElement("div",{style:{color:"seagreen",fontSize:"60px"}}," There are no movies. Wanna add some? ")}):this.setState({displayed:r.a.createElement("div",{id:"loader"},r.a.createElement(P.BeatLoader,{color:"#05c46b",loading:!0}))}))}},{key:"getMovies",value:function(){var e=this,t={Accept:"application/json","Content-Type":"application/json"};fetch(F()("https://api.themoviedb.org/3/discover/movie?page=1&include_video=false&include_adult=false&sort_by=popularity.desc&language=en-US&api_key={}&append_to_response=credits",T),{headers:t}).then(function(e){return e.json()}).then(function(n){n.results.forEach(function(n){fetch(F()("https://api.themoviedb.org/3/movie/{0}?api_key={1}&append_to_response=credits",n.id,T),{headers:t}).then(function(t){if(t.ok)return t.json();var n=t.status,a=t.statusText;return e.setState({error:{status:n,msg:a}}),Promise.reject("".concat(n,": ").concat(a))}).then(function(t){e.props.addMovie({id:n.id,title:n.title,release_year:n.release_date.match(/\d{4,4}/g)[0],runtime:t.runtime,genres:n.genre_ids.map(function(e){return R[e]}).join(", "),poster_path:n.poster_path,director:e.extractDirectors(t.credits.crew).join(", ")})}).catch(function(t){console.log("[New Data Err]",t),e.setState({error:t},function(){var t=r.a.createElement("div",{style:{color:"seagreen",fontSize:"40px",maxWidth:"200px"}}," Oops! An error occured: ",e.state.error,". Please refresh.");e.setState({displayed:t})})})})}).catch(function(e){console.log("[Error]",e)})}},{key:"componentDidMount",value:function(){this.getMovies()}},{key:"render",value:function(){return r.a.createElement("div",{className:"movies-list"},this.state.displayed)}}]),t}(a.Component)),$=Object(h.b)(function(e){return{movies:e.movies}},function(e){return{addMovie:function(t){return e({type:"ADD_MOVIE",payload:t})}}})(B),G=(n(299),function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(s.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={id:"",title:"",release_year:"",runtime:"",genre:"",director:"",errors:{}},n}return Object(u.a)(t,e),Object(c.a)(t,[{key:"handleChange",value:function(e,t){var n=this,a=e.target.value;this.setState(function(e){var r;return Object(E.a)({},e,(r={},Object(b.a)(r,t,a),Object(b.a)(r,"errors",Object(E.a)({},n.state.errors,Object(b.a)({},t,D([t],a,n.props.movies,!0)))),r))})}},{key:"onSubmit",value:function(e){e.preventDefault();var t=this.state,n=t.title,a=t.release_year,r=t.runtime,i=t.genre,o=t.director,l=(n.length*a.length*Math.pow(i.length,4)-Math.pow(this.props.movies.length,5)).toString();this.props.addMovie({id:l,title:_(n),release_year:a,runtime:r,genres:i,poster_path:"NEW_MOVIE",director:o}),this.props.onClose()}},{key:"render",value:function(){var e=this,t=this.props,n=t.isOpen,a=t.onClose;return r.a.createElement("div",null,r.a.createElement(O.a,{id:"add-dialog",open:n,onClose:a},r.a.createElement(C.a,{id:"dialog-title"},"Add a movie to our collection:"),r.a.createElement(M.a,null,r.a.createElement("form",{id:"add-form",autoComplete:"off",onSubmit:function(t){return e.onSubmit(t)}},r.a.createElement("div",{className:"add-dialog-text-fields add-dialog-text-fields"},r.a.createElement("input",{autoFocus:!0,className:"form-text-field",id:"title",placeholder:"Movie Title",onChange:function(t){return e.handleChange(t,"title")}}),r.a.createElement("input",{maxLength:"4",className:"form-text-field",id:"year",placeholder:"Release Year",onChange:function(t){return e.handleChange(t,"release_year")}}),r.a.createElement("input",{className:"form-text-field",id:"runtime",placeholder:"Runtime",onChange:function(t){return e.handleChange(t,"runtime")}}),r.a.createElement("input",{className:"form-text-field",id:"genre",placeholder:"Genre",onChange:function(t){return e.handleChange(t,"genre")}}),r.a.createElement("input",{className:"form-text-field",id:"director",placeholder:"Director",onChange:function(t){return e.handleChange(t,"director")}})),r.a.createElement("div",{id:"dialog-errors"},w(this.state.errors).map(function(e,t){return r.a.createElement("div",{key:Math.pow(e.length,3)+t,className:"dialog-err"},e)})),r.a.createElement("div",{className:"dialog-actions"},r.a.createElement("button",{disabled:!N(this.state.errors,!0),type:"submit",className:"dialog-btn"},"Submit"),r.a.createElement("button",{type:"button",className:"dialog-btn dialog-btn-cancel",onClick:a},"Cancel"))))))}}]),t}(a.Component)),H=Object(h.b)(function(e){return{movies:e.movies}},function(e){return{addMovie:function(t){return e({type:"ADD_MOVIE",payload:t})}}})(G),J=(n(301),function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(s.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={isAddModalOpen:!1,isTop:!0},n.handleClick=function(){n.setState({isAddModalOpen:!0})},n.handleClose=function(){n.setState({isAddModalOpen:!1})},n}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;document.addEventListener("scroll",function(){var t=window.scrollY<10;t!==e.state.isTop&&e.setState({isTop:t})})}},{key:"render",value:function(){return r.a.createElement("div",{className:this.state.isTop?"navbar navbar-top":"navbar navbar-bottom"},r.a.createElement("img",{alt:"Logo",src:"/logo.png"}),r.a.createElement("div",{id:"add-btn-wrapper"},r.a.createElement("button",{onClick:this.handleClick,id:"add-btn"},"+")),r.a.createElement(H,{isOpen:this.state.isAddModalOpen,onClose:this.handleClose}))}}]),t}(a.Component)),U=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{id:"cinema"},r.a.createElement(J,null),r.a.createElement($,null),r.a.createElement(m,null))}}]),t}(a.Component),Z=(n(303),function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(U,null))}}]),t}(a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(305);var q=n(53),K=n(56),Q={movies:[]},X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_MOVIE":return Object(E.a)({},e,{movies:Object(K.a)(e.movies).concat([t.payload])});case"DELETE_MOVIE":return Object(E.a)({},e,{movies:Object(K.a)(e.movies).filter(function(e){return e.id!==t.id})});case"EDIT_MOVIE":var n=e.movies.findIndex(function(e){return e.id===t.payload.id}),a=Object(K.a)(e.movies);return a[n]=t.payload,Object(E.a)({},e,{movies:a});default:return e}},ee=Object(q.b)(X);o.a.render(r.a.createElement(h.a,{store:ee},r.a.createElement(Z,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[121,2,1]]]);
//# sourceMappingURL=main.57816173.chunk.js.map